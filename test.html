<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script src="processing.js"></script>
<script src="init.js" type="text/javascript"></script> 
<script src="jquery.js" type="text/javascript"></script>
<title>Page test javascript</title>
<script type="text/javascript">
//MACHINE A ECRIRE
	$.fn.typewriter = function(opt) {
		  var typeone = function(self, text, content) {
		    if (text.length > 0) {
		      var next = text.match(/(\s*(<[^>]*>)?)*(&.*?;|.?)/)[0];
		      text = text.substr(next.length);
		      $(self).html(content+next);
		      setTimeout(function(){
		        typeone(self, text, content+next);
		      }, opt['delay']);
		    }
		  }
		  this.each(function() {
		    opt = opt || { 'delay': 100 };
		    $(this).height($(this).height());
		    $(this).width($(this).width());
		    typeone(this, $(this).html(), '');
		  });
		}
	
		$(document).ready(function(){

		  //TESTS
		  var n=-1;
		  var testtext = "voici un exemple de texte pour... exemple";
		  var lettresOriginales = new Array('a','b','c','d','e');
		  var lettresCodees = new Array('§','ø','£','=','µ');
		  var lettresTableaux = new Array(lettresOriginales,lettresCodees);	  
		  var toutesLettres  
		  //remplacement initial (,'f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z')
		  for(var i=0; i<6; i++)
		  {   			   
			  testtext=testtext.replace(new RegExp(lettresTableaux[0][i], 'g'),lettresTableaux[1][i]);
		  }

		  
		  //réécriture

	          var intevalDecodage = setInterval(function()
							          {    
							        	  testtext=testtext.replace(new RegExp(lettresTableaux[1][n], 'g'),lettresTableaux[0][n]);
							              $("#test").html(testtext);
							              if(n<6)
							              {
							              n++;
							              }  
							          },400); 
		  //affichage texte codée
				    
        $("#test").html(testtext);
        //effet machine à ecrire
		  $(".typewriter")
		  .typewriter({'delay':10});
		});

	
</script>
</head>
<body>
<div id="introduction" class="typewriter">
  Here's a<br />typewriter plugin.
</div>
<div id="test" class="typewriter">
</div>

</body>
</html>